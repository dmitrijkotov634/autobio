from typing import Union

from .utils import Cycle
from .value import Value


class TextFont(Value):
    pattern = "qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM0123456789"

    _caps = {
        "typewriter": "ðššðš ðšŽðš›ðšðš¢ðšžðš’ðš˜ðš™ðšŠðšœðšðšðšðš‘ðš“ðš”ðš•ðš£ðš¡ðšŒðšŸðš‹ðš—ðš–ðš€ðš†ð™´ðšðšƒðšˆðš„ð™¸ð™¾ð™¿ð™°ðš‚ð™³ð™µð™¶ð™·ð™¹ð™ºð™»ðš‰ðš‡ð™²ðš…ð™±ð™½ð™¼",
        "outline": "ð•¢ð•¨ð•–ð•£ð•¥ð•ªð•¦ð•šð• ð•¡ð•’ð•¤ð••ð•—ð•˜ð•™ð•›ð•œð•ð•«ð•©ð•”ð•§ð•“ð•Ÿð•žâ„šð•Žð”¼â„ð•‹ð•ð•Œð•€ð•†â„™ð”¸ð•Šð”»ð”½ð”¾â„ð•ð•‚ð•ƒâ„¤ð•â„‚ð•ð”¹â„•ð•„",
        "serif_bold": "ðªð°ðžð«ð­ð²ð®ð¢ð¨ð©ðšð¬ððŸð ð¡ð£ð¤ð¥ð³ð±ðœð¯ð›ð§ð¦ðð–ð„ð‘ð“ð˜ð”ðˆðŽðð€ð’ðƒð…ð†ð‡ð‰ðŠð‹ð™ð—ð‚ð•ðððŒ",
        "serif_bold_italic":
        "ð’’ð’˜ð’†ð’“ð’•ð’šð’–ð’Šð’ð’‘ð’‚ð’”ð’…ð’‡ð’ˆð’‰ð’‹ð’Œð’ð’›ð’™ð’„ð’—ð’ƒð’ð’Žð‘¸ð‘¾ð‘¬ð‘¹ð‘»ð’€ð‘¼ð‘°ð‘¶ð‘·ð‘¨ð‘ºð‘«ð‘­ð‘®ð‘¯ð‘±ð‘²ð‘³ð’ð‘¿ð‘ªð‘½ð‘©ð‘µð‘´",
        "serif_italic": "ð‘žð‘¤ð‘’ð‘Ÿð‘¡ð‘¦ð‘¢ð‘–ð‘œð‘ð‘Žð‘ ð‘‘ð‘“ð‘”â„Žð‘—ð‘˜ð‘™ð‘§ð‘¥ð‘ð‘£ð‘ð‘›ð‘šð‘„ð‘Šð¸ð‘…ð‘‡ð‘Œð‘ˆð¼ð‘‚ð‘ƒð´ð‘†ð·ð¹ðºð»ð½ð¾ð¿ð‘ð‘‹ð¶ð‘‰ðµð‘ð‘€",
        "small_caps": "Ç«á´¡á´‡Ê€á´›Êá´œÉªá´á´˜á´€sá´…Ò“É¢Êœá´Šá´‹ÊŸá´¢xá´„á´ Ê™É´á´QWERTYUIOPASDFGHJKLZXCVBNM",
        "script": "ð“†ð“Œâ„¯ð“‡ð“‰ð“Žð“Šð’¾â„´ð“…ð’¶ð“ˆð’¹ð’»â„Šð’½ð’¿ð“€ð“ð“ð“ð’¸ð“‹ð’·ð“ƒð“‚ð’¬ð’²â„°â„›ð’¯ð’´ð’°â„ð’ªð’«ð’œð’®ð’Ÿâ„±ð’¢â„‹ð’¥ð’¦â„’ð’µð’³ð’žð’±â„¬ð’©â„³",
        "script_bold": "ð“ºð”€ð“®ð“»ð“½ð”‚ð“¾ð“²ð“¸ð“¹ð“ªð“¼ð“­ð“¯ð“°ð“±ð“³ð“´ð“µð”ƒð”ð“¬ð“¿ð“«ð“·ð“¶ð“ ð“¦ð“”ð“¡ð“£ð“¨ð“¤ð“˜ð“žð“Ÿð“ð“¢ð““ð“•ð“–ð“—ð“™ð“šð“›ð“©ð“§ð“’ð“¥ð“‘ð“ð“œ",
        "sans_bold": "ð—¾ð˜„ð—²ð—¿ð˜ð˜†ð˜‚ð—¶ð—¼ð—½ð—®ð˜€ð—±ð—³ð—´ð—µð—·ð—¸ð—¹ð˜‡ð˜…ð—°ð˜ƒð—¯ð—»ð—ºð—¤ð—ªð—˜ð—¥ð—§ð—¬ð—¨ð—œð—¢ð—£ð—”ð—¦ð——ð—™ð—šð—›ð—ð—žð—Ÿð—­ð—«ð—–ð—©ð—•ð—¡ð— ",
        "sans_bold_italic":
        "ð™¦ð™¬ð™šð™§ð™©ð™®ð™ªð™žð™¤ð™¥ð™–ð™¨ð™™ð™›ð™œð™ð™Ÿð™ ð™¡ð™¯ð™­ð™˜ð™«ð™—ð™£ð™¢ð™Œð™’ð™€ð™ð™ð™”ð™ð™„ð™Šð™‹ð˜¼ð™Žð˜¿ð™ð™‚ð™ƒð™…ð™†ð™‡ð™•ð™“ð˜¾ð™‘ð˜½ð™‰ð™ˆ",
        "sans_italic": "ð˜²ð˜¸ð˜¦ð˜³ð˜µð˜ºð˜¶ð˜ªð˜°ð˜±ð˜¢ð˜´ð˜¥ð˜§ð˜¨ð˜©ð˜«ð˜¬ð˜­ð˜»ð˜¹ð˜¤ð˜·ð˜£ð˜¯ð˜®ð˜˜ð˜žð˜Œð˜™ð˜›ð˜ ð˜œð˜ð˜–ð˜—ð˜ˆð˜šð˜‹ð˜ð˜Žð˜ð˜‘ð˜’ð˜“ð˜¡ð˜Ÿð˜Šð˜ð˜‰ð˜•ð˜”",
        "sans": "ð—Šð—ð–¾ð—‹ð—ð—’ð—Žð—‚ð—ˆð—‰ð–ºð—Œð–½ð–¿ð—€ð—ð—ƒð—„ð—…ð—“ð—‘ð–¼ð—ð–»ð—‡ð—†ð–°ð–¶ð–¤ð–±ð–³ð–¸ð–´ð–¨ð–®ð–¯ð– ð–²ð–£ð–¥ð–¦ð–§ð–©ð–ªð–«ð–¹ð–·ð–¢ð–µð–¡ð–­ð–¬",
        "gothic": "ð”®ð”´ð”¢ð”¯ð”±ð”¶ð”²ð”¦ð”¬ð”­ð”žð”°ð”¡ð”£ð”¤ð”¥ð”§ð”¨ð”©ð”·ð”µð” ð”³ð”Ÿð”«ð”ªð””ð”šð”ˆâ„œð”—ð”œð”˜â„‘ð”’ð”“ð”„ð”–ð”‡ð”‰ð”Šâ„Œð”ð”Žð”â„¨ð”›â„­ð”™ð”…ð”‘ð”",
        "gothic_bold": "ð––ð–œð–Šð–—ð–™ð–žð–šð–Žð–”ð–•ð–†ð–˜ð–‰ð–‹ð–Œð–ð–ð–ð–‘ð–Ÿð–ð–ˆð–›ð–‡ð–“ð–’ð•¼ð–‚ð•°ð•½ð•¿ð–„ð–€ð•´ð•ºð•»ð•¬ð•¾ð•¯ð•±ð•²ð•³ð•µð•¶ð•·ð–…ð–ƒð•®ð–ð•­ð•¹ð•¸",
    }

    _numbers = {
        "circles":
        "â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“žâ“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“Žâ“ðŸ„‹âž€âžâž‚âžƒâž„âž…âž†âž‡âžˆ",
    }

    _fonts = {
        "tiny": "áµ Ê·áµ‰Ê³áµ—Ê¸áµ˜â±áµ’áµ–áµƒË¢áµˆá¶ áµÊ°Ê²áµË¡á¶»Ë£á¶œáµ›áµ‡â¿áµ",
        "comic": "á‘«á—¯á—´á–‡TYá‘ŒIOá‘­á—©Õá—ªá–´á˜œá•¼á’Ká’ªá˜”á™­á‘•á¯á—·á‘Žá—°",
        "circles_black": "ðŸ… ðŸ…¦ðŸ…”ðŸ…¡ðŸ…£ðŸ…¨ðŸ…¤ðŸ…˜ðŸ…žðŸ…ŸðŸ…ðŸ…¢ðŸ…“ðŸ…•ðŸ…–ðŸ…—ðŸ…™ðŸ…šðŸ…›ðŸ…©ðŸ…§ðŸ…’ðŸ…¥ðŸ…‘ðŸ…ðŸ…œ",
        "squares": "ðŸ…€ðŸ…†ðŸ„´ðŸ…ðŸ…ƒðŸ…ˆðŸ…„ðŸ„¸ðŸ„¾ðŸ„¿ðŸ„°ðŸ…‚ðŸ„³ðŸ„µðŸ„¶ðŸ„·ðŸ„¹ðŸ„ºðŸ„»ðŸ…‰ðŸ…‡ðŸ„²ðŸ……ðŸ„±ðŸ„½ðŸ„¼",
        "squares_black": "ðŸ†€ðŸ††ðŸ…´ðŸ†ðŸ†ƒðŸ†ˆðŸ†„ðŸ…¸ðŸ…¾ðŸ…¿ðŸ…°ðŸ†‚ðŸ…³ðŸ…µðŸ…¶ðŸ…·ðŸ…¹ðŸ…ºðŸ…»ðŸ†‰ðŸ†‡ðŸ…²ðŸ†…ðŸ…±ðŸ…½ðŸ…¼",
        "manga": "Ò¨å±±ä¹‡å°ºã„’ã„šã„©|ã„–å©å‚ä¸‚á—ªåƒá˜œå„ï¾ŒÒœã„¥ä¹™ä¹‚åŒšá¯ä¹ƒå‡ çˆª",
        **_caps,
        **_numbers
    }

    def caps():
        return Cycle(*_caps.keys())

    def numbers():
        return "circles"  # Cycle(*_numbers.keys())

    def fonts():
        return Cycle(*_fonts.keys())

    def __init__(self, text: Union[Value, str], font: Union[Value, str]):
        """Applies a text font to a string

        :param text: Text
        :param font: Text font name
        """
        self.text = text
        self.font = font

    async def get(self, **data) -> str:
        font = self._fonts[await Value.resolve(self.font, **data)]
        result = []
        for c in await Value.resolve(self.text, **data):
            if c not in self.pattern:
                result += c
                continue
            i = self.pattern.index(c)
            result.append(font[i] if i < len(font) else c)
        return "".join(result)
